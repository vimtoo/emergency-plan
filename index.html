<!DOCTYPE html>
<html lang="af" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noodplan vir die Diplomatieke Sending in Koeweit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .nav-link { transition: all 0.2s ease-in-out; }
        .nav-link.active { background-color: #2563eb; color: white; }
        .nav-link:hover { background-color: #dbeafe; color: #1e40af; }
        .nav-link.active:hover { background-color: #1d4ed8; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        .source-citation { font-size: 0.8rem; color: #6b7280; text-align: right; margin-top: 1rem; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="flex h-screen bg-white">
        
        <aside id="sidebar" class="w-64 bg-gray-50 p-4 flex-shrink-0 transition-transform -translate-x-full sm:translate-x-0 border-r">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center shrink-0">
                    <span class="text-white text-2xl font-bold">!</span>
                </div>
                <h1 class="text-lg font-bold text-gray-700 mx-3">Noodplan</h1>
            </div>
            <nav id="main-nav">
                <ul>
                    <li><a href="#dashboard" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Kontrolepaneel</a></li>
                    <li><a href="#threats" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Radiologiese Bedreigings</a></li>
                    <li><a href="#chemical" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Chemiese Bedreigings</a></li>
                    <li><a href="#preparedness" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Persoonlike Voorbereiding</a></li>
                    <li><a href="#shelter" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Skuiling & Beskerming</a></li>
                    <li><a href="#procedures" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Noodprosedures</a></li>
                    <li><a href="#medical" class="nav-link flex items-center p-3 my-1 rounded-lg font-semibold text-gray-600">Mediese Reaksie</a></li>
                </ul>
            </nav>
        </aside>

        
        <main class="flex-1 overflow-y-auto p-4 sm:p-8 bg-gray-100 relative">
             <button id="menu-toggle" class="sm:hidden p-2 mb-4 bg-white rounded-md border">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
            </button>
            
            <section id="dashboard" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Hoofkontrolepaneel</h2>
                <p class="mb-6 text-gray-500">'n Vinnige oorsig van die huidige situasie en vereiste onmiddellike aksies.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex flex-col justify-between">
                        <div>
                           <h3 class="font-bold text-lg mb-2">Huidige Bedreigingsvlak (THREATCON)</h3>
                           <p class="text-sm text-gray-500 mb-4">Hierdie vlak bepaal die gereedheidspostuur wat van alle personeel vereis word.</p>
                        </div>
                        <div id="threat-level-card" class="text-center p-4 rounded-lg">
                            <div id="threat-level-text" class="text-4xl font-bold"></div>
                            <div id="threat-level-desc" class="mt-2 font-semibold"></div>
                        </div>
                         <div class="mt-4 flex justify-center">
                            <select id="threat-level-selector" class="p-2 border rounded-md w-full"></select>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 lg:col-span-2">
                        <h3 class="font-bold text-lg mb-4">Onmiddellike Noodaksies</h3>
                        <p class="text-sm text-gray-500 mb-6">Volg amptelike instruksies in 'n noodgeval. Hierdie is vinnige skakels na sleutelprosedures.</p>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <button onclick="navigateTo('procedures', 'alpha')" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold p-4 rounded-lg text-center transition">
                                <span class="text-3xl">‚ò¢Ô∏è</span>
                                <span class="block mt-2">Prosedure Alpha: Skuil-ter-plaatse</span>
                            </button>
                            <button onclick="navigateTo('procedures', 'bravo')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold p-4 rounded-lg text-center transition">
                                <span class="text-3xl">üöó</span>
                                <span class="block mt-2">Prosedure Bravo: Evakuasie</span>
                            </button>
                            <button onclick="navigateTo('procedures', 'charlie')" class="bg-red-500 hover:bg-red-600 text-white font-bold p-4 rounded-lg text-center transition">
                                <span class="text-3xl">üö®</span>
                                <span class="block mt-2">Prosedure Charlie: Terroriste-insident</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mt-8 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-lg mb-2">Oorsig van die Veiligheidsituasie</h3>
                    <p class="text-gray-600">Die huidige veiligheidsituasie in die streek is wisselvallig met die potensiaal vir vinnige eskalasie. Enige voorval, soos 'n milit√™re aanval op 'n kernfasiliteit, sal deel wees van 'n bre√´r, meer dinamiese konflik. Die noodplan moet in staat wees om verskeie krisisse gelyktydig te hanteer, insluitend milit√™re optrede, radiologiese besoedeling, terrorisme en burgerlike onrus.</p>
                </div>
            </section>

            
            <section id="threats" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Radiologiese Bedreigings & Waarskuwingstelsels</h2>
                <p class="mb-6 text-gray-500">Verstaan die potensi√´le radiologiese risiko's en hoe om amptelike waarskuwings te ontvang.</p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Radiologiese Bedreiging: Bushehr-fasiliteit</h3>
                        <p class="text-sm text-gray-600 mb-4">Die hoof radiologiese bedreiging vir Koeweit is Iran se Bushehr-kernkragsentrale, wat ongeveer 290 km oorkant die Golf gele√´ is. Die aankoms van enige radioaktiewe vrystelling hang af van die windrigting.</p>
                        <div class="relative w-full h-64 bg-blue-100 rounded-lg overflow-hidden border-2 border-blue-200">
                            <div class="absolute top-1/2 right-1/4 transform -translate-y-1/2 text-center">
                                <div class="w-4 h-4 bg-yellow-400 rounded-full animate-ping"></div>
                                <span class="font-bold text-blue-800">Koeweit</span>
                            </div>
                            <div class="absolute top-1/2 left-1/4 transform -translate-y-1/2 text-center">
                                <div class="w-4 h-4 bg-red-600 rounded-full"></div>
                                <span class="font-bold text-red-800">Bushehr</span>
                            </div>
                            <div id="wind-plume" class="absolute top-1/2 left-1/4 h-1 bg-red-400/50 origin-left transition-all duration-1000" style="width: 150px;"></div>
                        </div>
                         <div class="mt-4 text-center">
                            <p class="text-sm mb-2">Simuleer Windrigting:</p>
                            <button id="shamal-wind-btn" class="px-4 py-2 bg-gray-200 rounded-md">Shamal-wind (Oorheersend)</button>
                            <button id="kaus-wind-btn" class="px-4 py-2 bg-red-200 rounded-md">Kaus-wind (Bedreiging)</button>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Koeweit se Openbare Waarskuwingstelsels</h3>
                        <p class="text-sm text-gray-600 mb-4">Die eerste waarskuwing vir enige groot voorval kan van die Koeweitse owerhede kom. Weet wat die sirenes beteken.</p>
                        <div id="siren-guide" class="space-y-3"></div>
                        <div class="source-citation">Bron: Koeweit se Ministerie van Binnelandse Sake, Algemene Direktoraat van Burgerlike Beskerming.</div>
                    </div>
                </div>
            </section>
            
            <section id="chemical" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Chemiese Wapenbedreigings</h2>
                <p class="mb-6 text-gray-500">Prosedures en noodhulp vir blootstelling aan chemiese middels, gebaseer op Burgerlike Beskermingsriglyne.</p>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6">
                    <h3 class="font-bold text-lg mb-4">Beskermende Maatre√´ls vir Chemiese Aanvalle</h3>
                    <div id="chem-measures-accordion" class="space-y-4"></div>
                    <div class="source-citation">Bron: Koeweit se Ministerie van Binnelandse Sake, "Voorsorgmaatre√´ls in Geval van Aanvalle met Chemiese Wapens".</div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-lg mb-4">Simptome & Noodhulp vir Chemiese Middels</h3>
                     <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr id="chem-table-header"></tr>
                            </thead>
                            <tbody id="chem-table-body"></tbody>
                        </table>
                    </div>
                     <div class="source-citation">Bron: Koeweit se Ministerie van Binnelandse Sake, "Voorsorgmaatre√´ls in Geval van Aanvalle met Chemiese Wapens".</div>
                </div>
            </section>

            <section id="preparedness" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Persoonlike en Gesinsvoorbereiding</h2>
                <p class="mb-6 text-gray-500">Vooraf voorbereiding is die sleutel tot veiligheid. Gebruik hierdie hulpmiddels om jou gesin voor te berei.</p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Tuisbly-pakket (2-week voorraad)</h3>
                        <div id="stay-kit-checklist" class="space-y-3 max-h-96 overflow-y-auto ps-2"></div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Noodtas (Per persoon - 72 uur)</h3>
                        <div id="go-bag-checklist" class="space-y-3 max-h-96 overflow-y-auto ps-2"></div>
                    </div>
                </div>
                <div class="mt-8 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-lg mb-4">Gesinsnoodplan</h3>
                     <div class="space-y-4">
                        <div>
                            <label class="font-semibold">Kontakpersoon buite die land:</label>
                            <input type="text" placeholder="Naam, verhouding en telefoonnommer" class="mt-1 w-full p-2 border rounded-md">
                        </div>
                        <div>
                            <label class="font-semibold">Ontmoetingspunte:</label>
                            <input type="text" placeholder="1. Naby die huis (bv. straathoek)" class="mt-1 w-full p-2 border rounded-md">
                            <input type="text" placeholder="2. In die woonbuurt (bv. park)" class="mt-2 w-full p-2 border rounded-md">
                            <input type="text" placeholder="3. Ambassade se bymekaarkomplek (soos aangedui)" class="mt-2 w-full p-2 border rounded-md">
                        </div>
                        <div>
                            <label class="font-semibold">B√™re Belangrike Dokumente:</label>
                            <p class="text-sm text-gray-600">Versamel paspoorte, geboortesertifikate, versekeringsdokumente. Hou papierkopie√´ in jou Noodtas en ge√´nkripteerde digitale kopie√´ op 'n USB-skyf of veilige wolkberging.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="shelter" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Skuiling & Beskerming</h2>
                <p class="mb-6 text-gray-500">Gedetailleerde leiding oor die skep van 'n veilige skuiling en die verstaan van stralingsbeskerming.</p>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6">
                    <h3 class="font-bold text-lg mb-4">Berei Jou Huisskuiling Voor</h3>
                    <p class="text-sm text-gray-600 mb-4">In 'n radiologiese of chemiese noodgeval is die veiligste aksie om binne te gaan en 'n versperring tussen jou en die buitelug te skep. Hier is hoe om jou skuilkamer vooraf voor te berei.</p>
                    <div id="home-shelter-steps" class="space-y-4"></div>
                     <div class="source-citation">Bron: Koeweit se Ministerie van Binnelandse Sake, Algemene Direktoraat van Burgerlike Beskerming.</div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Sleutelbeginsels van Stralingsbeskerming</h3>
                        <p class="text-sm text-gray-600 mb-4">Jou veiligheid hang af van drie basiese beginsels: Tyd, Afstand en Afskerming. Die minimalisering van jou blootstelling is die sleutel.</p>
                        <div id="rad-protection-principles" class="space-y-4"></div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Openbare Skuilingsopspoorder</h3>
                        <p class="text-sm text-gray-600">Die Staat Koeweit hou openbare skuilings in stand. In 'n noodgeval sal owerhede skuilingplekke aankondig. Gebruik hierdie hulpmiddel om jou naaste aangewese skuiling te vind met behulp van die amptelike Burgerlike Beskermingsdiens.</p>
                        
                        <div class="mt-4 space-y-4 p-4 border rounded-lg bg-gray-50">
                            <div>
                                <label for="gov-select" class="block text-sm font-medium text-gray-700">Goewerneur</label>
                                <select id="gov-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></select>
                            </div>
                             <div>
                                <label for="area-select" class="block text-sm font-medium text-gray-700">Gebied</label>
                                <select id="area-select" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></select>
                            </div>
                            <button id="search-shelter-btn" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-700 transition">Soek op Amptelike Webwerf</button>
                            <p class="text-xs text-center text-gray-500">Dit sal die amptelike Koeweitse Burgerlike Beskerming-skuilingsopspoorder in 'n nuwe venster oopmaak.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="procedures" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Standaard Bedryfsprosedures (SOP)</h2>
                <p class="mb-6 text-gray-500">Duidelike, stap-vir-stap instruksies vir spesifieke noodscenario's.</p>
                <div id="procedures-accordion" class="space-y-4"></div>
            </section>

            
            <section id="medical" class="content-section">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Mediese Reaksie en Dekontaminasie</h2>
                <p class="mb-6 text-gray-500">Noodsaaklike aksies na 'n voorval om gesondheidsrisiko's en blootstelling te verminder.</p>
                <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                    <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Radiologiese Dekontaminasie</h3>
                        <p class="text-sm text-gray-600 mb-4">As jy buite was tydens 'n radioaktiewe vrystelling, voer hierdie stappe onmiddellik uit om radioaktiewe materiaal te verwyder.</p>
                        <ol id="decon-steps" class="list-decimal list-inside space-y-3">
                        </ol>
                         <div class="source-citation">Bron: Koeweit se Ministerie van Binnelandse Sake, "Straling en die Gevolge daarvan en Metodes van Voorkoming".</div>
                    </div>
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-lg mb-4">Kaliumjodied (KI) Dosisse</h3>
                        <p class="text-sm text-gray-600 mb-4"><strong>MOENIE neem nie, tensy uitdruklik deur die Ambassade beveel.</strong> Dit beskerm slegs die skildklier teen radioaktiewe jodium.</p>
                        <div class="chart-container">
                            <canvas id="ki-chart"></canvas>
                        </div>
                    </div>
                </div>
                 <div class="mt-8 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <h3 class="font-bold text-lg mb-4">Gedetailleerde Kaliumjodied Dosistabel</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr id="ki-table-header"></tr>
                            </thead>
                            <tbody id="ki-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- DATA GENERATORS ---
            
            const shelterLocations = {
                'Kies Goewerneur': [],
                'Al Asimah (Hoofstad)': ['Abdullah Al-Salem', 'Adailiya', 'Bneid Al-Qar', 'Daiya', 'Dasma', 'Faiha', 'Jibla', 'Kaifan', 'Khaldiya', 'Mansouriya', 'Mirqab', 'Nuzha', 'Qadsiya', 'Qortuba', 'Rawda', 'Salhiya', 'Shamiya', 'Sharq', 'Shuwaikh', 'Sulaibikhat', 'Yarmouk'],
                'Hawalli': ['Bayan', 'Hawalli', 'Jabriya', 'Mishref', 'Mubarak Al-Abdullah', 'Rumaithiya', 'Salmiya', 'Salwa', 'Shaab'],
                'Mubarak Al-Kabeer': ['Abu Al Hasaniya', 'Abu Ftaira', 'Adan', 'Al-Qurain', 'Al-Qusour', 'Fnaitees', 'Messila', 'Mubarak Al-Kabeer', 'Sabah Al-Salem', 'Wista'],
                'Al-Ahmadi': ['Abu Halifa', 'Ahmadi', 'Fahaheel', 'Fintas', 'Hadiya', 'Jaber Al-Ali', 'Mahboula', 'Mangaf', 'Reqqa', 'Sabahiya', 'Wafra', 'Zoor'],
                'Al-Farwaniya': ['Abdullah Al-Mubarak', 'Lughawe', 'Andalous', 'Ardiya', 'Ashbelia', 'Dhajeej', 'Farwaniya', 'Fordous', 'Jleeb Al-Shuyoukh', 'Khaitan', 'Omariya', 'Rabia', 'Reggai', 'Rai'],
                'Al-Jahra': ['Amghara', 'Jahra', 'Kabd', 'Naeem', 'Naseem', 'Oyoun', 'Qasr', 'Saad Al Abdullah', 'Sulaibiya', 'Taima', 'Waha']
            };

            function getThreatLevels() {
                return {
                    '4': { text: 'Vlak 4', desc: 'Normaal', color: 'bg-green-100', textColor: 'text-green-800' },
                    '3': { text: 'Vlak 3', desc: 'Verhoogde Gereedheid', color: 'bg-blue-100', textColor: 'text-blue-800' },
                    '2': { text: 'Vlak 2', desc: 'Ho√´ Waaksaamheid', color: 'bg-yellow-100', textColor: 'text-yellow-800' },
                    '1': { text: 'Vlak 1', desc: 'Krisisreaksie', color: 'bg-red-100', textColor: 'text-red-800' }
                };
            }

            function getSirenData() {
                const data = [
                    { tone: 'Onderbroke Klank', meaning: 'Naderende Gevaar / Waarskuwing', action: "'n Moontlike gevaar nader. Stop normale aktiwiteite. Gaan binnenshuis. Monitor plaaslike media en wag vir 'n amptelike Ambassade-waarskuwing. Berei voor om noodprosedures uit te voer."},
                    { tone: 'Golwende Klank', meaning: 'Gevaar het Plaasgevind', action: "Die ramp of aanval vind nou plaas. <strong>Voer onmiddellik Skuil-ter-plaatse (Prosedure Alpha) uit.</strong> Beweeg na jou aangewese skuilkamer. Moenie wag vir 'n Ambassade-boodskap nie."},
                    { tone: 'Deurlopende Klank', meaning: 'Alles Veilig / Einde van Gevaar', action: "Die onmiddellike gevaar is verby. <strong>Bly in die skuiling.</strong> Moenie vertrek voordat jy 'n amptelike 'ALLES VEILIG'-boodskap van die Ambassade ontvang het nie. Wag vir verdere leiding."}
                ];
                const colors = ['bg-blue-100', 'bg-yellow-100', 'bg-green-100'];
                return data.map((item, index) => ({ ...item, color: colors[index] }));
            }
            
            function getChemicalData() {
                return {
                    measures: [
                        { title: 'Voor \'n Aanval (Voorbereiding)', content: '<ul><li>Berei jou skuilkamer voor (sien Skuiling-afdeling).</li><li>Maak seker jou noodpakket bevat plastiekvelle, kleefband en \'n sk√™r.</li><li>Leer hoe om ventilasiestelsels vinnig af te skakel.</li><li>As jy \'n gasmasker het, inspekteer dit en maak seker dit pas.</li></ul>' },
                        { title: 'Tydens \'n Aanval (Indien Buite)', content: '<ul><li>Probeer die rigting van die aanval identifiseer en beweeg vinnig teen die wind in.</li><li>Bedek jou mond en neus met \'n lap (\'n nat lap is beter).</li><li>Soek die naaste stewige, geslote gebou.</li></ul>' },
                        { title: 'Tydens \'n Aanval (Indien in \'n Voertuig)', content: '<ul><li>Maak alle vensters toe en skakel alle ventilasie- en lugversorgingstelsels af.</li><li>Ry uit die geaffekteerde area indien moontlik.</li><li>As jy nie kan wegry nie, parkeer die motor en skuil in die naaste gebou.</li></ul>' },
                        { title: 'Na \'n Aanval (Aksies na die Voorval)', content: '<ul><li>Gaan na jou voorafgekose skuilkamer en se√´l dit.</li><li>Trek jou buitenste laag klere uit, se√´l dit in \'n plastieksak en was jouself deeglik met seep en water.</li><li>Luister na die radio vir amptelike instruksies van die owerhede.</li><li>Moenie enige kos of water inneem wat jy vermoed besmet kan wees nie.</li></ul>' }
                    ],
                    firstAidHeaders: ['Agent Tipe', 'Simptome', 'Noodhulp'],
                    firstAid: [
                        { type: 'Senuweemiddels (bv. Sarin)', symptoms: 'Moeilik asemhaal, vernoude pupille, kwyl, stuiptrekkings, bewussynsverlies.', aid: 'Beweeg onmiddellik na vars lug. Verwyder besmette klere. Spoel vel en o√´ met groot hoeveelhede water. Soek dringend mediese hulp.' },
                        { type: 'Blaarmiddels (bv. Mosterdgas)', symptoms: 'Rooiheid en blase op die vel (soos erge brandwonde), oogirritasie, asemhalingsprobleme.', aid: 'Beweeg na vars lug. Verwyder besmette klere. Spoel vel met water. Moenie blase breek nie. Soek dringend mediese hulp.' }
                    ]
                };
            }

            function getKitData() {
                return {
                    stayKit: ['Water (4 liter per persoon per dag)', 'Nie-bederfbare kos (2-week voorraad)', 'Handblikoopmaker', 'Plastiekvelle en kleefband', 'Stofmaskers (N95 of P100)', 'Omvattende noodhulpkissie', 'Persoonlike medikasie (1-maand voorraad)', 'Battery- of handslinger-radio', 'Ekstra batterye', 'Flitsligte', 'Sanitasiemiddele (nat doekies, ens.)'].map(text => ({ text, checked: false })),
                    goBag: ['Water en kos (3-dae voorraad)', 'Ekstra klere en stewige skoene', 'Kopie√´ van belangrike dokumente', 'Kontant in klein denominasies', 'Noodsaaklike medikasie (7-dae voorraad)', 'Skoon klere in \'n verse√´lde sak', 'Klein noodhulpkissie', 'Draagbare radio en flitslig', 'Ekstra batterye', 'Plaaslike kaart'].map(text => ({ text, checked: false }))
                };
            }
            
            function getProceduresData() {
                return [
                    { id: 'alpha', title: 'Prosedure Alpha: Skuil-ter-plaatse (Radiologies/Chemies)', icon: '‚ò¢Ô∏è', content: '<p class="mb-4">Die doel is om jou te beskerm teen luggedraagde kontaminante...</p><p class="font-bold text-lg mb-2 text-center">"Gaan Binne, Bly Binne, Luister In"</p><ol class="list-decimal list-inside space-y-2"><li><strong>Gaan Binne:</strong> Gaan onmiddellik in die naaste stewige gebou in.</li><li><strong>Bly Binne:</strong> Beweeg na jou vooraf aangewese skuilkamer.</li><li><strong>Se√´l:</strong> Maak vensters en deure toe. Skakel alle lugversorging- en ventilasiestelsels af. Volg gedetailleerde se√´lstappe in die "Skuiling"-afdeling.</li><li><strong>Luister In:</strong> Gebruik jou radio om vir amptelike instruksies te monitor.</li><li><strong>Moenie Vertrek nie:</strong> Bly in die skuiling totdat jy \'n amptelike "ALLES VEILIG"-boodskap ontvang.</li></ol>' },
                    { id: 'bravo', title: 'Prosedure Bravo: Evakuasie', icon: 'üöó', content: '<p class="mb-4">Evakuasie sal slegs deur die Sendinghoof beveel word...</p><p class="font-bold mb-2">By ontvangs van \'n evakuasiebevel:</p><ol class="list-decimal list-inside space-y-2"><li>Bly kalm en luister.</li><li>Versamel jou gesin en Noodtasse.</li><li>As die tyd dit toelaat, skakel hoofnutdienste af.</li><li>Sluit jou huis.</li><li>Gaan na die aangewese bymekaarkomplek.</li><li>Meld onmiddellik aan.</li></ol>' },
                    { id: 'charlie', title: 'Prosedure Charlie: Terroriste-insident', icon: 'üö®', content: '<p class="mb-4">Volg die instruksies van die Streeksveiligheidsbeampte (RSO)...</p><div class="space-y-4"><h4 class="font-bold">In geval van \'n aktiewe aanvaller:</h4><ul class="list-disc list-inside"><li><strong>Hardloop:</strong> As daar \'n veilige ontsnaproete is, vertrek onmiddellik.</li><li><strong>Kruip weg:</strong> As jy nie kan ontsnap nie, vind \'n veilige plek.</li><li><strong>Veg:</strong> As \'n laaste uitweg, tree op met fisiese aggressie.</li></ul></div>' }
                ];
            }

            function getDeconData() {
                return ['<strong>Verwyder buitenste klere:</strong> Verwyder die buitenste laag klere versigtig en vermy om dit te skud. Plaas dit in \'n plastieksak en se√´l dit. Hou hierdie sak weg van mense en troeteldiere.', '<strong>Was deeglik:</strong> Neem \'n warm (nie warm nie) stort en was jou hele liggaam en hare met seep en sjampoe. As \'n stort nie beskikbaar is nie, gebruik nat doekies of \'n nat lap om alle blootgestelde vel, veral hande en gesig, skoon te maak.', '<strong>Trek skoon klere aan:</strong> Dra heeltemal skoon klere wat binne \'n geslote laai of kas geb√™re is, weg van die besmette lug.', '<strong>Help ander indien moontlik:</strong> As jy ander moet help dekontamineer, probeer om waterdigte handskoene en \'n masker te dra. Adviseer hulle om dieselfde stappe te volg.'];
            }

            function getKiData() {
                return {
                    chartLabel: 'Kaliumjodied Dosis (mg)',
                    chartTitle: 'Dosisse per Ouderdomsgroep',
                    labels: ['Pasgeborenes (0-1 md)', 'Babas (1-3 jr)', 'Kinders (3-12 jr)', 'Adolessente (12-18)', 'Volwassenes (18-40)', 'Swanger/Lakterend'],
                    dosages: [16.25, 32.5, 65, 130, 130, 130],
                    tableHeaders: ['Ouderdomsgroep', 'Aanbevole Dosis', 'Belangrike Notas'],
                    table: [
                      { age: 'Volwassenes ouer as 40 jaar', dose: '130 mg', notes: 'Word oor die algemeen nie aanbeveel nie.' },
                      { age: 'Volwassenes 18 tot 40 jaar', dose: '130 mg', notes: 'Standaard volwasse dosis.' },
                      { age: 'Swanger en Lakterende Vroue', dose: '130 mg', notes: 'Hoogste prioriteit. Enkel dosis.' },
                      { age: 'Adolessente (12 tot 18 jaar)', dose: '130 mg', notes: 'Standaard volwasse dosis.' },
                      { age: 'Kinders (3 tot 12 jaar)', dose: '65 mg', notes: 'Helfte van die volwasse dosis.' },
                      { age: 'Babas (1 md tot 3 jr)', dose: '32.5 mg', notes: '\'n Kwart van die volwasse dosis.' },
                      { age: 'Pasgeborenes (geboorte tot 1 md)', dose: '16.25 mg', notes: '\'n Agtste van die volwasse dosis. Enkel dosis.' }
                    ]
                };
            }
            
            function getShelterData() {
                return {
                    steps: [
                        { title: 'Stap 1: Kies die Beste Kamer', text: 'Kies \'n binnenshuise kamer met die minste vensters en deure, verkieslik in \'n kelder of op die grondvloer. Die doel is om soveel moontlik soliede materiaal tussen jou en die buitekant te plaas.' },
                        { title: 'Stap 2: Versamel Voorrade Vooraf', text: 'B√™re jou Tuisbly-pakket, insluitend se√´lmateriaal (plastiekvelle, kleefband), in of naby jou skuilkamer vir vinnige toegang.' },
                        { title: 'Stap 3: Se√´l die Kamer Wanneer Opgedra', text: 'Wanneer aanges√™ word om te skuil, skakel alle waaiers, lugversorging en verhittingstelsels af. Gebruik kleefband en plastiekvelle om vensters, afsetpunte en vents te bedek. Plaas nat handdoeke aan die onderkant van deure om \'n beter se√´l teen luggedraagde deeltjies te skep.' },
                        { title: 'Stap 4: Bly Binne en Luister In', text: 'Bly in die verse√´lde kamer. Gebruik jou battery-aangedrewe radio om na amptelike instruksies van die owerhede te luister. Moenie vertrek voordat jy die "Alles Veilig"-boodskap ontvang het nie.' }
                    ],
                    principles: [
                        { title: 'Tyd', text: 'Beperk die duur van jou blootstelling. Hoe minder tyd jy naby \'n stralingsbron spandeer, hoe laer sal jou dosis wees. Volg instruksies om vir die aanbevole tydperk in jou skuiling te bly.' },
                        { title: 'Afstand', text: 'Hoe verder jy van \'n stralingsbron is, hoe veiliger is jy. Die intensiteit van straling neem dramaties af met afstand. Dit is hoekom evakuasie (wanneer dit veilig geag word) \'n sleutelstrategie is.' },
                        { title: 'Afskerming', text: 'Plaas \'n digte materiaal (\'n skild) tussen jou en die stralingsbron. Beton, stene en grond is uitstekende afskermingsmateriale. Dit is die beginsel agter skuiling in \'n sentrale, vensterlose kamer of kelder.' }
                    ]
                };
            }


            // --- ELEMENTS ---
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const threatLevelSelector = document.getElementById('threat-level-selector');
            const threatLevelCard = document.getElementById('threat-level-card');
            const threatLevelText = document.getElementById('threat-level-text');
            const threatLevelDesc = document.getElementById('threat-level-desc');
            const menuToggle = document.getElementById('menu-toggle');
            const sidebar = document.getElementById('sidebar');
            const govSelect = document.getElementById('gov-select');
            const areaSelect = document.getElementById('area-select');
            const searchShelterBtn = document.getElementById('search-shelter-btn');
            let kiChartInstance;

            // --- FUNCTIONS ---
            function navigateTo(sectionId, subSectionId = null) {
                contentSections.forEach(section => section.classList.remove('active'));
                const activeSection = document.getElementById(sectionId);
                if (activeSection) activeSection.classList.add('active');

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${sectionId}`) link.classList.add('active');
                });
                
                if(sidebar.classList.contains('translate-x-0')) {
                    sidebar.classList.remove('translate-x-0');
                    sidebar.classList.add('-translate-x-full');
                }

                if (subSectionId) {
                    const element = document.getElementById(subSectionId);
                    if (element && element.closest('.accordion-toggle')) {
                        document.querySelectorAll('.accordion-toggle').forEach(acc => {
                           acc.nextElementSibling.style.maxHeight = null;
                           acc.querySelector('span:last-child').style.transform = 'rotate(0deg)';
                        });
                        const content = element.nextElementSibling;
                        content.style.maxHeight = content.scrollHeight + "px";
                        element.querySelector('span:last-child').style.transform = 'rotate(180deg)';
                        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            }
            
            function updateThreatLevel(level) {
                const threatLevels = getThreatLevels();
                const levelData = threatLevels[level];
                threatLevelText.textContent = levelData.text;
                threatLevelDesc.textContent = levelData.desc;
                threatLevelCard.className = 'text-center p-4 rounded-lg transition-colors duration-300 ' + levelData.color + ' ' + levelData.textColor;
            }

            function populateThreatSelector() {
                const threatLevels = getThreatLevels();
                const currentVal = threatLevelSelector.value || '4';
                threatLevelSelector.innerHTML = '';
                Object.entries(threatLevels).forEach(([key, val]) => {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = `${val.text}: ${val.desc}`;
                    threatLevelSelector.appendChild(option);
                });
                threatLevelSelector.value = currentVal;
            }
            
            function createChecklist(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                data.forEach(item => {
                    const label = document.createElement('label');
                    label.className = 'flex items-center p-2 bg-gray-50 rounded-md hover:bg-gray-100 cursor-pointer';
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.className = 'mr-3 form-checkbox h-5 w-5 text-blue-600 rounded';
                    checkbox.checked = item.checked;
                    label.appendChild(checkbox);
                    label.append(item.text);
                    container.appendChild(label);
                });
            }
            
            function populateSirens() {
                const container = document.getElementById('siren-guide');
                container.innerHTML = '';
                getSirenData().forEach(siren => {
                    const div = document.createElement('div');
                    div.className = `p-4 rounded-lg border cursor-pointer ${siren.color}`;
                    div.innerHTML = `
                        <div class="flex justify-between items-center">
                            <h4 class="font-bold">${siren.tone}</h4>
                            <span class="text-sm font-semibold">${siren.meaning}</span>
                        </div>
                        <p class="siren-action mt-2 text-sm hidden">${siren.action}</p>
                    `;
                    div.addEventListener('click', () => div.querySelector('.siren-action').classList.toggle('hidden'));
                    container.appendChild(div);
                });
            }
            
            function populateProcedures(containerId, data) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'bg-white rounded-xl shadow-sm border border-gray-200';
                    div.innerHTML = `
                        <button id="${item.id || ''}" class="accordion-toggle w-full p-4 text-left flex justify-between items-center font-bold text-lg">
                            <span>${item.icon || ''} ${item.title}</span>
                            <span class="transform transition-transform duration-300">‚ñº</span>
                        </button>
                        <div class="accordion-content px-4 pb-4 text-gray-600">${item.content}</div>
                    `;
                    container.appendChild(div);
                });
                document.querySelectorAll('.accordion-toggle').forEach(button => {
                    button.addEventListener('click', () => {
                        const content = button.nextElementSibling;
                        const icon = button.querySelector('span:last-child');
                        const isOpen = content.style.maxHeight;
                        const allContent = button.closest('.space-y-4').querySelectorAll('.accordion-content');
                        const allIcons = button.closest('.space-y-4').querySelectorAll('.accordion-toggle span:last-child');
                        allContent.forEach(c => c.style.maxHeight = null);
                        allIcons.forEach(i => i.style.transform = 'rotate(0deg)');
                        
                        if (!isOpen || content.style.maxHeight === '0px') {
                            content.style.maxHeight = content.scrollHeight + "px";
                            icon.style.transform = 'rotate(180deg)';
                        } else {
                            content.style.maxHeight = null;
                            icon.style.transform = 'rotate(0deg)';
                        }
                    });
                });
            }

            function populateChemicalSection() {
                const chemData = getChemicalData();
                populateProcedures('chem-measures-accordion', chemData.measures.map(m => ({...m, icon: '‚ò£Ô∏è'})));

                const thead = document.getElementById('chem-table-header');
                thead.innerHTML = '';
                chemData.firstAidHeaders.forEach(header => {
                    const th = document.createElement('th');
                    th.scope = 'col';
                    th.className = 'px-6 py-3';
                    th.textContent = header;
                    thead.appendChild(th);
                });

                const tbody = document.getElementById('chem-table-body');
                tbody.innerHTML = '';
                chemData.firstAid.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.className = 'bg-white border-b';
                    tr.innerHTML = `
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">${row.type}</th>
                        <td class="px-6 py-4">${row.symptoms}</td>
                        <td class="px-6 py-4">${row.aid}</td>
                    `;
                    tbody.appendChild(tr);
                });
            }

            function populateDeconSteps() {
                const container = document.getElementById('decon-steps');
                container.innerHTML = '';
                getDeconData().forEach(step => {
                    const li = document.createElement('li');
                    li.innerHTML = step;
                    container.appendChild(li);
                });
            }

            function populateKiTable() {
                const kiData = getKiData();
                const thead = document.getElementById('ki-table-header');
                thead.innerHTML = '';
                kiData.tableHeaders.forEach(header => {
                    const th = document.createElement('th');
                    th.scope = 'col';
                    th.className = 'px-6 py-3';
                    th.textContent = header;
                    thead.appendChild(th);
                });

                const tbody = document.getElementById('ki-table-body');
                tbody.innerHTML = '';
                kiData.table.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.className = 'bg-white border-b';
                    tr.innerHTML = `
                        <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">${row.age}</th>
                        <td class="px-6 py-4">${row.dose}</td>
                        <td class="px-6 py-4">${row.notes}</td>
                    `;
                    tbody.appendChild(tr);
                });
            }

            function createKiChart() {
                if (kiChartInstance) {
                    kiChartInstance.destroy();
                }
                const kiData = getKiData();
                const ctx = document.getElementById('ki-chart').getContext('2d');
                kiChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: kiData.labels,
                        datasets: [{
                            label: kiData.chartLabel,
                            data: kiData.dosages,
                            backgroundColor: 'rgba(59, 130, 246, 0.5)',
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false, indexAxis: 'y',
                        scales: { x: { beginAtZero: true } },
                        plugins: { legend: { display: false }, title: { display: true, text: kiData.chartTitle } }
                    }
                });
            }
            
            function populateShelterLocator() {
                govSelect.innerHTML = '';
                Object.keys(shelterLocations).forEach(gov => {
                    const option = document.createElement('option');
                    option.value = gov;
                    option.textContent = gov;
                    govSelect.appendChild(option);
                });
                govSelect.dispatchEvent(new Event('change'));
            }

            function updateAreaDropdown() {
                const selectedGov = govSelect.value;
                const areas = shelterLocations[selectedGov] || [];
                areaSelect.innerHTML = '';
                
                if (areas.length === 0) {
                     const option = document.createElement('option');
                     option.textContent = 'Kies Gebied';
                     areaSelect.appendChild(option);
                }

                areas.forEach(area => {
                    const option = document.createElement('option');
                    option.value = area;
                    option.textContent = area;
                    areaSelect.appendChild(option);
                });
            }
            
            function populateShelterInfo() {
                const shelterData = getShelterData();
                const stepsContainer = document.getElementById('home-shelter-steps');
                stepsContainer.innerHTML = '';
                shelterData.steps.forEach(step => {
                    const div = document.createElement('div');
                    div.innerHTML = `<h4 class="font-semibold text-md text-gray-700">${step.title}</h4><p class="text-sm text-gray-600">${step.text}</p>`;
                    stepsContainer.appendChild(div);
                });

                const principlesContainer = document.getElementById('rad-protection-principles');
                principlesContainer.innerHTML = '';
                shelterData.principles.forEach(principle => {
                    const div = document.createElement('div');
                    div.innerHTML = `<h4 class="font-semibold text-md text-gray-700">${principle.title}</h4><p class="text-sm text-gray-600">${principle.text}</p>`;
                    principlesContainer.appendChild(div);
                });
                
                populateShelterLocator();
            }

            // --- EVENT LISTENERS ---
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo(e.currentTarget.getAttribute('href').substring(1));
                });
            });

            threatLevelSelector.addEventListener('change', (e) => {
                updateThreatLevel(e.target.value);
            });
            
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
                sidebar.classList.toggle('translate-x-0');
            });

            document.getElementById('shamal-wind-btn').addEventListener('click', () => {
                const plume = document.getElementById('wind-plume');
                plume.style.transform = 'translateY(-50%) rotate(-45deg)';
            });

            document.getElementById('kaus-wind-btn').addEventListener('click', () => {
                const plume = document.getElementById('wind-plume');
                plume.style.transform = 'translateY(-50%) rotate(45deg)';
            });
            
            govSelect.addEventListener('change', () => {
                updateAreaDropdown();
            });
            
            searchShelterBtn.addEventListener('click', () => {
                window.open('https://www.moi.gov.kw/main/eservices/civildefence/shelters', '_blank');
            });

            // --- INITIALIZATION ---
            function init() {
                populateThreatSelector();
                updateThreatLevel('4');
                populateSirens();
                const kitData = getKitData();
                createChecklist('stay-kit-checklist', kitData.stayKit);
                createChecklist('go-bag-checklist', kitData.goBag);
                populateProcedures('procedures-accordion', getProceduresData());
                populateChemicalSection();
                populateDeconSteps();
                populateKiTable();
                createKiChart();
                populateShelterInfo();

                const hash = window.location.hash.substring(1) || 'dashboard';
                navigateTo(hash);
                document.getElementById('shamal-wind-btn').click();
            }
            
            init();

            window.navigateTo = navigateTo;
        });
    </script>
</body>
</html>
